(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{331:function(s,t,a){"use strict";a.r(t);var n=a(0),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"在cocos中制作一个简易血条"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在cocos中制作一个简易血条"}},[s._v("#")]),s._v(" 在Cocos中制作一个简易血条")]),s._v(" "),t("blockquote",[t("p",[s._v("Demo的简单总结")])]),s._v(" "),t("h2",{attrs:{id:"素材准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#素材准备"}},[s._v("#")]),s._v(" 素材准备")]),s._v(" "),t("blockquote",[t("p",[s._v("需要准备以下素材，如下所示，可以根据自己的需要自行更换素材")])]),s._v(" "),t("ol",[t("li",[s._v("血条外框图片")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s1.vika.cn/space/2023/01/04/dbb6b4ec05164bf2878c5a62a3acf8b8",alt:"bloodBar"}})]),s._v(" "),t("p",[s._v("2.血条填充图片")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s1.vika.cn/space/2023/01/04/a0b6971f2c354709807527320a1c1b75",alt:"blood"}})]),s._v(" "),t("h2",{attrs:{id:"血条制作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#血条制作"}},[s._v("#")]),s._v(" 血条制作")]),s._v(" "),t("h3",{attrs:{id:"制作血条有两种方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#制作血条有两种方法"}},[s._v("#")]),s._v(" 制作血条有两种方法")]),s._v(" "),t("ol",[t("li",[s._v("直接将图片的类型改成"),t("code",[s._v("filled")]),s._v(",通过改变"),t("code",[s._v("fillStart")]),s._v("属性来改变血条长度(不讲)。")]),s._v(" "),t("li",[s._v("还有就是利用Cocos的"),t("code",[s._v("ProgressBar")]),s._v("组件来制作")])]),s._v(" "),t("h3",{attrs:{id:"用progressbar制作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用progressbar制作"}},[s._v("#")]),s._v(" 用ProgressBar制作")]),s._v(" "),t("ol",[t("li",[s._v("创建一个"),t("code",[s._v("Progress")]),s._v("组件")]),s._v(" "),t("li",[s._v("将血条外框图片，拖给组件的"),t("code",[s._v("progressBar")]),s._v("节点的"),t("code",[s._v("sprite Frame")]),s._v("属性")]),s._v(" "),t("li",[s._v("将血条填充图片，拖给组件的"),t("code",[s._v("Bar")]),s._v("节点的"),t("code",[s._v("sprite Frame")]),s._v("属性")]),s._v(" "),t("li",[s._v("完成效果如图:")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s1.vika.cn/space/2023/01/04/b5e83fb2f63e4023aacd65df8805904c",alt:"image-20221229221429132"}})]),s._v(" "),t("h2",{attrs:{id:"用js来控制血条"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用js来控制血条"}},[s._v("#")]),s._v(" 用js来控制血条")]),s._v(" "),t("ul",[t("li",[s._v("其实很简单的，只需改变"),t("code",[s._v("ProgressBar")]),s._v("组件的"),t("code",[s._v("progress")]),s._v("属性即可改变血条的长度。")]),s._v(" "),t("li",[t("code",[s._v("progress")]),s._v("的值是一个小数")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//以一个人物的血条为例")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//先给人物设定一个血条上限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" hpMaximums "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("；\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//定义一个变量用来保存当前血量")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" heroHp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hpMaximums"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//要获取到血条组件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("heroProgress "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Canvas/bg/heroBlood'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getComponent")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ProgressBar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//以角色被怪物攻击打中为例，此时会触发人物的碰撞回调。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//受击函数，可以碰撞回调中调用改函数改变血条长度")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("playerHit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//可以根据progress来判断角色血条是否为零。")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("heroProgress"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("progress "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.05")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n       \t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//被攻击到时扣除当前角色血量")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("heroHp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n       \t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取到血条的progress属性，通过改变它来更改血条长度，因为该属性为小数，所以需先除以血条上限")]),s._v("\n       \t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//除以血条上限得到的数就是当前血量的百分比，将它赋值给progress即可。")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("heroProgress"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("progress "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("playerHp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" hpMaximums"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("heroProgress"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("progress "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.05")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//当血条上限变为零时就可以切换到角色死亡的场景结束游戏。")]),s._v("\n            cc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("director"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("loadScene")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dead'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);